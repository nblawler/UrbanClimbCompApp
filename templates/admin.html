<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Admin ¬∑ Urban Climb Comp</title>
		<link rel="stylesheet" href="/static/app.css" />
	</head>
	<body>
		<nav class="container top-nav">
			<div class="brand">
				<span class="brand-mark">üßó‚Äç‚ôÇÔ∏è</span>
				<span class="brand-name">Urban Climb Comp</span>
			</div>
			<div class="nav-links">
				<a class="back" href="/">Home</a>
				<a class="back" href="/leaderboard">Leaderboard</a>
			</div>
		</nav>

		<main class="container">
			<header class="header">
				<h1>Admin</h1>
			</header>

			{% if error %}
				<div class="error">{{ error }}</div>
			{% endif %}

			{% if message %}
				<div class="status ok">{{ message }}</div>
			{% endif %}


			<section class="card">
				<h2>Create competitor</h2>

				<form method="post">
					<label>Admin password</label>
					<input type="password" name="password" required />

					<label>Name</label>
					<input type="text" name="new_name" required />

					<label>Gender</label>
					<select name="new_gender">
						<option>Inclusive</option>
						<option>Male</option>
						<option>Female</option>
					</select>

					<button type="submit" name="action" value="create_competitor" class="primary">
						Create competitor
					</button>
				</form>
			</section>

			<section class="card">
				<h2>Delete competitor</h2>

				<form method="post">
					<label>Admin password</label>
					<input type="password" name="password" required />

					<label>Competitor number</label>
					<input type="number" name="competitor_id" min="1" required />

					<button type="submit" name="action" value="delete_competitor" class="primary" style="background:#8b1e1e;">
						Delete competitor
					</button>
				</form>
			</section>

			<section class="card">
				<h2>Create section</h2>

				<form method="post">
					<label>Admin password</label>
					<input type="password" name="password" required />

					<label>Section name</label>
					<input type="text" name="section_name" required />

					<button type="submit" name="action" value="create_section" class="primary">
						Create section
					</button>
				</form>
			</section>

			<section class="card">
				<h2>Existing sections</h2>

				{% if sections %}
					<ul class="section-list">
						{% for section in sections %}
							<li style="margin-bottom:8px;">
								<strong>{{ section.name }}</strong>
								¬∑
								{{ section.climbs|length }}
								climb{% if section.climbs|length != 1 %}s{% endif %}

								<a
									href="/admin/section/{{ section.id }}/edit"
									class="primary"
									style="padding:4px 8px; font-size:12px; margin-left:12px;"
								>
									Edit
								</a>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					<p class="muted">No sections created yet.</p>
				{% endif %}
			</section>

			<section class="card">
				<h2>Reset all competitors & scores</h2>
				<p class="muted">
					WARNING: This deletes ALL competitors, ALL scores, ALL sections, and ALL climbs.
				</p>

				<form method="post">
					<label>Admin password</label>
					<input type="password" name="password" required placeholder="Enter admin password" />

					<button type="submit" name="action" value="reset_all" class="primary" style="background:#8b1e1e;">
						Reset all data
					</button>
				</form>
			</section>
		</main>
	</body>
</html>
