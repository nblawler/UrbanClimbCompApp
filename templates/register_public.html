<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Join the Comp · Urban Climb Comp</title>
	<link rel="stylesheet" href="/static/app.css" />
</head>
<body>
	{% set slug = (comp.slug if comp is defined and comp and comp.slug) %}
	<nav class="container top-nav">
		<div class="nav-links">
			<a class="back" href="/my-comps">Home</a>
			<a class="back" href="/leaderboard">Leaderboard</a>
		</div>
	</nav>

	<main class="container">
		<section class="card enter-card">
			<header class="hero" style="margin-bottom: 12px;">
				<h1 style="margin:0 0 6px 0;">Join the comp</h1>
				<p class="muted" style="margin:0;">
					Once you join, we’ll take you straight to your scoring page and email you a link.
				</p>
			</header>

			{% if error %}
				<p class="error">{{ error }}</p>
			{% endif %}

			<form method="post" class="enter-form" autocomplete="off">
				<div class="input-row" style="flex-direction:column; align-items:stretch; gap:10px;">

					<!-- Name -->
					<div style="width:100%;">
						<label for="name">Your name</label>
						<input
							id="name"
							name="name"
							type="text"
							required
							placeholder="e.g. Pickle"
							value="{{ name or '' }}"
						/>
					</div>

					<!-- Email (locked or editable) -->
					{% if locked_email %}
						<div style="width:100%;">
							<label>Email address</label>
							<div
								style="
									width:100%;
									padding:12px 14px;
									border-radius:10px;
									border:1px solid #2a2f36;
									background:#111316;
									color:var(--text);
								"
							>
								<div class="muted">
									We’ll use the email on file:
									<strong style="color:var(--text);">
										{{ email_on_file }}
									</strong>
								</div>
							</div>
						</div>
					{% else %}
						<div style="width:100%;">
							<label for="email">Email address</label>
							<input
								id="email"
								name="email"
								type="email"
								required
								placeholder="you@example.com"
								value="{{ email or '' }}"
							/>
						</div>
					{% endif %}

					<!-- Category -->
					<div style="width:100%;">
						<label for="gender">Category</label>
						<select
							id="gender"
							name="gender"
							style="
								width:100%;
								padding:12px 14px;
								border-radius:10px;
								border:1px solid #2a2f36;
								background:#111316;
								color:var(--text);
							"
						>
							<option value="Inclusive" {% if gender == "Inclusive" %}selected{% endif %}>
								Gender Inclusive
							</option>
							<option value="Female" {% if gender == "Female" %}selected{% endif %}>
								Female
							</option>
							<option value="Male" {% if gender == "Male" %}selected{% endif %}>
								Male
							</option>
						</select>
					</div>

				</div>

				<button type="submit" class="primary" style="margin-top:16px;">
					Start sending →
				</button>

				{% if locked_email %}
					<p class="form-hint" style="margin-top:10px;">
						We’ll email your scoring link to
						<strong>{{ email_on_file }}</strong>.
					</p>
				{% endif %}

				{% if not locked_email %}
					<p class="form-hint" style="margin-top:10px;">
						Already registered?
						<a
							href="/login{% if slug %}?slug={{ slug }}{% endif %}"
							class="back"
							style="text-decoration:underline;"
						>
							Log in to resume scoring
						</a>.
					</p>
				{% endif %}
			</form>
		</section>
	</main>
</body>
</html>
